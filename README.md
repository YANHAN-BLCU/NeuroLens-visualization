# NeuroLens Dashboard

A comprehensive visualization dashboard for analyzing and exploring safety neurons in large language models (LLMs), developed as part of the NeuroBreak research project.

## Overview

NeuroLens provides an interactive multi-panel interface for visualizing and analyzing dedicated safety neurons in transformer-based language models. It enables researchers to understand how safety mechanisms are implemented across different layers and components of neural networks.

## Features

- **Multi-Panel Dashboard**: 7 interactive visualization panels (A-G)
- **Real-time Language Switching**: Full support for English and Chinese (中文)
- **Force-Directed Graph**: Visualize neuron connections and relationships
- **Layer-wise Analysis**: Explore neuron behavior across model layers
- **Instance Inspection**: Examine specific jailbreak instances and their interactions
- **Heatmap Visualization**: Density maps for neuron activation patterns
- **Metric Tracking**: Performance metrics and evaluation results

## Panels

| Panel | Description |
|-------|-------------|
| **A - Control Panel** | Model selection, API configuration, safety neuron parameters |
| **B - Metric View** | Performance metrics and evaluation data |
| **C - Representation View** | Decision boundary visualizations per layer |
| **C2 - Density Heatmap** | Neuron activation density heatmaps |
| **D - Layer View** | Layer-wise neuron analysis and evolution |
| **E - Neuron View** | Force-directed graph of dedicated safety neurons |
| **F - Instance View** | Jailbreak instance table with detailed information |
| **G - Layer Performance** | Per-layer performance metrics |

## Prerequisites

- Node.js 18+
- npm or yarn
- Modern web browser (Chrome, Firefox, Edge)

## Installation

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build
```

## Project Structure

```
visualization/
├── index.html              # Main dashboard entry point
├── package.json            # Project dependencies
├── vis/
│   ├── panel_A_control.html    # Control panel
│   ├── panel_B_metric.html     # Metric view
│   ├── panel_C_representation.html  # Representation view
│   ├── panel_C2_heatmap.html   # Density heatmap
│   ├── panel_D_layer.html      # Layer view
│   ├── panel_E_neuron.html     # Neuron graph view
│   ├── panel_F_instance.html   # Instance table
│   └── panel_G_layer_performance.html  # Layer performance
└── outputs/                # Data files (generated by analysis scripts)
    ├── dedicated_safety_neurons.json
    ├── representation/
    ├── probes/
    └── ...
```

## Data Format

The dashboard loads data from the `outputs/` directory. Key data files:

- `dedicated_safety_neurons.json` - Identified safety neurons with layer/quadrant info
- `outputs/representation/` - Layer-wise representation data
- `outputs/probes/` - Probe training results per layer
- `base_evaluation.jsonl` - Jailbreak evaluation results

## Language Support

NeuroLens supports both English and Chinese (中文). Use the settings panel (gear icon in top bar) to switch languages:

- Menu bar and UI elements
- Panel titles and labels
- Chart titles and legends
- Table headers

## Technologies

- **Frontend**: React 18, Vite
- **Visualization**: D3.js (force-directed graphs), ECharts (charts)
- **Styling**: Tailwind CSS
- **State Management**: Zustand

## Usage

1. Start the development server: `npm run dev`
2. Open browser at `http://localhost:5173`
3. Use the Control Panel (A) to:
   - Select model folder
   - Configure API settings (optional)
   - Adjust safety neuron parameters (sparsity, P, Q values)
4. Explore different layers using the layer selector
5. Switch between English and Chinese as needed

## Configuration

### Safety Neuron Parameters

- **Sparsity (%)**: Percentage of neurons to identify as safety neurons
- **P**: Probability threshold for quadrant classification
- **Q**: Secondary threshold parameter

### Layer Selection

- All Layers (0-32)
- Layers 0-16 (early layers)
- Layers 17-32 (late layers)

## Development

```bash
# Run with hot reload
npm run dev

# Build production version
npm run build

# Preview production build
npm run preview
```

## License

This project is part of the NeuroBreak research project.

## Version

Current version: 1.0.0
